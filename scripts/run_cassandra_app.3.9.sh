#java -cp .:./code_classes/:soot-2.5.0.jar MyMain4 -app -cp .:$JAVA_HOME/jre/lib/rt.jar:./lib/jna-3.2.7.jar:./lib/guava-15.0.jar:./lib/slf4j-log4j12-1.7.2.jar:./lib/slf4j-api-1.7.2.jar:./lib/jackson-mapper-asl-1.0.1.jar:./lib/libthrift-0.9.1.jar:./lib/jackson-core-asl-1.9.2.jar:./lib/commons-lang3-3.1.jar:./lib/jamm-0.2.5.jar:./lib/super-csv-2.1.0.jar:./lib/metrics-core-2.2.0.jar:./lib/high-scale-lib-1.1.2.jar:./lib/concurrentlinkedhashmap-lru-1.3.jar:./lib/lz4-1.2.0.jar:./lib/jsr305-1.3.9.jar:./lib/log4j-1.2.16.jar:./lib/reporter-config-2.1.0.jar:./lib/netty-3.6.6.Final.jar:./lib/antlr-3.2.jar:./lib/jackson-core-asl-1.0.1.jar:./lib/snappy-java-1.0.5.jar:./lib/snakeyaml-1.11.jar:./lib/snaptree-0.1.jar:./lib/javax.validation-1.0.0.GA.jar:./lib/metrics-ganglia-2.0.3.jar:./lib/metrics-graphite-2.1.5.jar:./lib/thrift-server-internal-only-0.3.3.jar:./lib/disruptor-3.0.1.jar:./lib/compress-lzf-0.8.4.jar org.apache.cassandra.streaming.StreamReader >out_cassandra
rm -rf conf
ln -s conf_cassandra_3.9 conf
export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64
export JUNIT_HOME=/home/ting/DataLoopBugDetection/soot-soot-2.5.0
export CLASSPATH=$JUNIT_HOME/junit-4.12.jar:$JUNIT_HOME/hamcrest-core-1.3.jar:$JAVA_HOME/lib/tools.jar:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/jre/lib/jce.jar:/usr/share/scala/lib/scala-library.jar

#export CASSANDRACLASSPATH=/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/snaptree-0.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/log4j-1.2.16.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/snappy-java-1.0.5.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/super-csv-2.1.0.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/metrics-core-2.2.0.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/javax.validation-1.0.0.GA.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/slf4j-log4j12-1.7.2.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/antlr-3.2.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/disruptor-3.0.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/high-scale-lib-1.1.2.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/snakeyaml-1.11.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/metrics-ganglia-2.0.3.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/compress-lzf-0.8.4.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/slf4j-api-1.7.2.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/libthrift-0.9.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/commons-lang3-3.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/jamm-0.2.5.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/jackson-core-asl-1.9.2.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/guava-15.0.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/thrift-server-internal-only-0.3.3.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/netty-3.6.6.Final.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/lz4-1.2.0.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/jsr305-1.3.9.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/concurrentlinkedhashmap-lru-1.3.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/reporter-config-2.1.0.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/metrics-graphite-2.1.5.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/build/lib/jars/jna-3.2.7.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/build/lib/jars/jackson-core-asl-1.0.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/build/lib/jars/jackson-mapper-asl-1.0.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/build/apache-cassandra-thrift-2.0.8-SNAPSHOT.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/build/apache-cassandra-2.0.8-SNAPSHOT.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/commons-cli-1.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/json-simple-1.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/commons-codec-1.2.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/jbcrypt-0.3m.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/jline-1.0.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/jackson-mapper-asl-1.9.2.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/servlet-api-2.5-20081211.jar


export LIBDIR=/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-3.9-src/lib
export CASSANDRACLASSPATH=$LIBDIR/commons-math3-3.2.jar:$LIBDIR/libthrift-0.9.2.jar:$LIBDIR/reporter-config-base-3.0.0.jar:$LIBDIR/jna-4.0.0.jar:$LIBDIR/super-csv-2.1.0.jar:$LIBDIR/metrics-core-2.2.0.jar:$LIBDIR/jflex-1.6.0.jar:$LIBDIR/commons-cli-1.1.jar:$LIBDIR/slf4j-api-1.7.7.jar:$LIBDIR/metrics-core-3.1.0.jar:$LIBDIR/airline-0.6.jar:$LIBDIR/lz4-1.3.0.jar:$LIBDIR/asm-5.0.4.jar:$LIBDIR/concurrentlinkedhashmap-lru-1.4.jar:$LIBDIR/high-scale-lib-1.0.6.jar:$LIBDIR/stream-2.5.2.jar:$LIBDIR/disruptor-3.0.1.jar:$LIBDIR/json-simple-1.1.jar:$LIBDIR/snakeyaml-1.11.jar:$LIBDIR/logback-core-1.1.3.jar:$LIBDIR/commons-codec-1.2.jar:$LIBDIR/jamm-0.3.0.jar:$LIBDIR/thrift-server-0.3.7.jar:$LIBDIR/concurrent-trees-2.4.0.jar:$LIBDIR/compress-lzf-0.8.4.jar:$LIBDIR/ST4-4.0.8.jar:$LIBDIR/joda-time-2.4.jar:$LIBDIR/hppc-0.5.4.jar:$LIBDIR/primitive-1.0.jar:$LIBDIR/commons-lang3-3.1.jar:$LIBDIR/snowball-stemmer-1.3.0.581.1.jar:$LIBDIR/jackson-core-asl-1.9.2.jar:$LIBDIR/sigar-1.6.4.jar:$LIBDIR/javax.inject.jar:$LIBDIR/cassandra-driver-core-3.0.1-shaded.jar:$LIBDIR/metrics-jvm-3.1.0.jar:$LIBDIR/netty-all-4.0.39.Final.jar:$LIBDIR/ecj-4.4.2.jar:$LIBDIR/snappy-java-1.1.1.7.jar:$LIBDIR/ohc-core-j8-0.4.3.jar:$LIBDIR/metrics-logback-3.1.0.jar:$LIBDIR/jbcrypt-0.3m.jar:$LIBDIR/guava-15.0.jar:$LIBDIR/jcl-over-slf4j-1.7.7.jar:$LIBDIR/HdrHistogram-2.1.9.jar:$LIBDIR/log4j-over-slf4j-1.7.7.jar:$LIBDIR/reporter-config3-3.0.0.jar:$LIBDIR/jackson-mapper-asl-1.9.2.jar:$LIBDIR/caffeine-2.2.6.jar:$LIBDIR/ohc-core-0.4.3.jar:$LIBDIR/logback-classic-1.1.3.jar:$LIBDIR/reporter-config-2.1.0.jar:$LIBDIR/netty-3.6.6.Final.jar:$LIBDIR/snaptree-0.1.jar:$LIBDIR/javax.validation-1.0.0.GA.jar:$LIBDIR/groovy-all-2.4.7.jar:$LIBDIR/metrics-ganglia-2.0.3.jar:$LIBDIR/metrics-graphite-2.1.5.jar:$LIBDIR/janino-2.5.16.jar:$LIBDIR/commons-compiler-2.7.8.jar:$LIBDIR/xstream-1.4.7.jar:$LIBDIR/xmlpull-1.1.3.1.jar:$LIBDIR/antlr-3.2.jar

export BUILDDIR=/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-3.9-src/build
export CASSANDRABUILDCLASSPATH=$BUILDDIR/lib/sources/netty-all-4.0.39.Final-sources.jar:$BUILDDIR/lib/sources/commons-math3-3.2-sources.jar:$BUILDDIR/lib/sources/junit-4.6-sources.jar:$BUILDDIR/lib/sources/jna-4.1.0-sources.jar:$BUILDDIR/lib/sources/ecj-4.4.2-sources.jar:$BUILDDIR/lib/sources/slf4j-api-1.7.12-sources.jar:$BUILDDIR/lib/sources/cassandra-driver-core-3.0.1-sources.jar:$BUILDDIR/lib/sources/jmh-core-1.1.1-sources.jar:$BUILDDIR/lib/sources/guava-16.0.1-sources.jar:$BUILDDIR/lib/sources/metrics-core-3.1.2-sources.jar:$BUILDDIR/lib/sources/ohc-core-0.4.3-sources.jar:$BUILDDIR/lib/sources/compile-command-annotations-1.2.0-sources.jar:$BUILDDIR/lib/sources/jmh-generator-annprocess-1.1.1-sources.jar:$BUILDDIR/lib/sources/jopt-simple-4.6-sources.jar:$BUILDDIR/lib/jars/commons-math3-3.2.jar:$BUILDDIR/lib/jars/ftplet-api-1.0.0.jar:$BUILDDIR/lib/jars/ftpserver-deprecated-1.0.0-M2.jar:$BUILDDIR/lib/jars/jsr305-2.0.2.jar:$BUILDDIR/lib/jars/jmh-core-1.1.1.jar:$BUILDDIR/lib/jars/slf4j-api-1.7.12.jar:$BUILDDIR/lib/jars/org.jacoco.core-0.7.5.201505241946.jar:$BUILDDIR/lib/jars/jna-4.1.0.jar:$BUILDDIR/lib/jars/jersey-core-1.0.jar:$BUILDDIR/lib/jars/apache-rat-core-0.10.jar:$BUILDDIR/lib/jars/commons-configuration-1.6.jar:$BUILDDIR/lib/jars/commons-beanutils-1.7.0.jar:$BUILDDIR/lib/jars/commons-compress-1.5.jar:$BUILDDIR/lib/jars/jasper-runtime-5.5.12.jar:$BUILDDIR/lib/jars/commons-beanutils-core-1.8.0.jar:$BUILDDIR/lib/jars/commons-cli-1.2.jar:$BUILDDIR/lib/jars/hadoop-minicluster-1.0.3.jar:$BUILDDIR/lib/jars/antlr-3.5.2.jar:$BUILDDIR/lib/jars/commons-el-1.0.jar:$BUILDDIR/lib/jars/jasper-compiler-5.5.12.jar:$BUILDDIR/lib/jars/jersey-server-1.0.jar:$BUILDDIR/lib/jars/org.jacoco.report-0.7.5.201505241946.jar:$BUILDDIR/lib/jars/jetty-6.1.26.jar:$BUILDDIR/lib/jars/compile-command-annotations-1.2.0.jar:$BUILDDIR/lib/jars/org.jacoco.agent-0.7.5.201505241946.jar:$BUILDDIR/lib/jars/commons-lang-2.4.jar:$BUILDDIR/lib/jars/jsp-2.1-6.1.14.jar:$BUILDDIR/lib/jars/asm-debug-all-5.0.1.jar:$BUILDDIR/lib/jars/oro-2.0.8.jar:$BUILDDIR/lib/jars/jsr311-api-1.0.jar:$BUILDDIR/lib/jars/byteman-3.0.3.jar:$BUILDDIR/lib/jars/metrics-core-3.1.2.jar:$BUILDDIR/lib/jars/servlet-api-2.5-6.1.14.jar:$BUILDDIR/lib/jars/ST4-4.0.8.jar:$BUILDDIR/lib/jars/jets3t-0.7.1.jar:$BUILDDIR/lib/jars/jacocoagent.jar:$BUILDDIR/lib/jars/kfs-0.3.jar:$BUILDDIR/lib/jars/hadoop-test-1.0.3.jar:$BUILDDIR/lib/jars/guava-16.0.1.jar:$BUILDDIR/lib/jars/commons-collections-3.2.1.jar:$BUILDDIR/lib/jars/jackson-core-asl-1.0.1.jar:$BUILDDIR/lib/jars/jsp-api-2.1-6.1.14.jar:$BUILDDIR/lib/jars/cassandra-driver-core-3.0.1-shaded.jar:$BUILDDIR/lib/jars/mina-core-2.0.0-M5.jar:$BUILDDIR/lib/jars/commons-net-1.4.1.jar:$BUILDDIR/lib/jars/jopt-simple-4.6.jar:$BUILDDIR/lib/jars/ftpserver-core-1.0.0.jar:$BUILDDIR/lib/jars/commons-math-2.1.jar:$BUILDDIR/lib/jars/ecj-4.4.2.jar:$BUILDDIR/lib/jars/ohc-core-j8-0.4.3.jar:$BUILDDIR/lib/jars/byteman-submit-3.0.3.jar:$BUILDDIR/lib/jars/commons-digester-1.8.jar:$BUILDDIR/lib/jars/jetty-util-6.1.26.jar:$BUILDDIR/lib/jars/junit-4.6.jar:$BUILDDIR/lib/jars/commons-io-2.2.jar:$BUILDDIR/lib/jars/byteman-install-3.0.3.jar:$BUILDDIR/lib/jars/jackson-mapper-asl-1.0.1.jar:$BUILDDIR/lib/jars/commons-codec-1.4.jar:$BUILDDIR/lib/jars/jmh-generator-annprocess-1.1.1.jar:$BUILDDIR/lib/jars/hadoop-core-1.0.3.jar:$BUILDDIR/lib/jars/apache-rat-tasks-0.10.jar:$BUILDDIR/lib/jars/apache-rat-0.10.jar:$BUILDDIR/lib/jars/byteman-bmunit-3.0.3.jar:$BUILDDIR/lib/jars/xmlenc-0.52.jar:$BUILDDIR/lib/jars/hsqldb-1.8.0.10.jar:$BUILDDIR/lib/jars/ohc-core-0.4.3.jar:$BUILDDIR/lib/jars/commons-httpclient-3.0.1.jar

export CODECLASSPATH=/home/ting/DataLoopBugDetection/workspace_java/MyBodyTransformer/bin
#java -cp .:./code_classes:soot-2.5.0.jar MyMain4 -cp .:$CASSANDRACLASSPATH:$CLASSPATH -app org.apache.cassandra.streaming.StreamReader > cassandra-2.0.8.txt
#cassandra is using soot-2.5.0.jar not soot-trunk.jar. If using soot-trunk.jar, there will be error

while read line           
do           
    echo "parsing " ${line}
    java -cp .:$CODECLASSPATH:soot-2.5.0.jar MyMain4 -cp .:$CASSANDRACLASSPATH:$CASSANDRABUILDCLASSPATH:$CLASSPATH -app ${line} > cassandra-3.9.txt
	#hadoop is using soot-trunk.jar not soot-2.5.0.jar          
done < cassandraClasses.3.9.log

#only test one class
#line=org.apache.cassandra.db.context.CounterContext
#echo "parsing " ${line}
#java -cp .:$CODECLASSPATH:soot-2.5.0.jar MyMain4 -cp .:$CASSANDRACLASSPATH:$CASSANDRABUILDCLASSPATH:$CLASSPATH -app ${line} > cassandra-3.9.txt

#java -cp .:./code_classes:soot-2.5.0.jar MyMain4 -app -cp .:$CLASSPATH:./lib/jna-3.2.7.jar:./lib/guava-15.0.jar:./lib/slf4j-log4j12-1.7.2.jar:./lib/slf4j-api-1.7.2.jar:./lib/jackson-mapper-asl-1.0.1.jar:./lib/libthrift-0.9.1.jar:./lib/jackson-core-asl-1.9.2.jar:./lib/commons-lang3-3.1.jar:./lib/jamm-0.2.5.jar:./lib/super-csv-2.1.0.jar:./lib/metrics-core-2.2.0.jar:./lib/high-scale-lib-1.1.2.jar:./lib/concurrentlinkedhashmap-lru-1.3.jar:./lib/lz4-1.2.0.jar:./lib/jsr305-1.3.9.jar:./lib/log4j-1.2.16.jar:./lib/reporter-config-2.1.0.jar:./lib/netty-3.6.6.Final.jar:./lib/antlr-3.2.jar:./lib/jackson-core-asl-1.0.1.jar:./lib/snappy-java-1.0.5.jar:./lib/snakeyaml-1.11.jar:./lib/snaptree-0.1.jar:./lib/javax.validation-1.0.0.GA.jar:./lib/metrics-ganglia-2.0.3.jar:./lib/metrics-graphite-2.1.5.jar:./lib/thrift-server-internal-only-0.3.3.jar:./lib/disruptor-3.0.1.jar:./lib/compress-lzf-0.8.4.jar org.apache.cassandra.streaming.StreamReader > cassandra-2.0.8.txt

#java -cp .:./code_classes/:soot-2.5.0.jar MyMain4 -app -cp .:$JAVA_HOME/jre/lib/rt.jar:./lib/jna-3.2.7.jar:./lib/guava-15.0.jar:./lib/slf4j-log4j12-1.7.2.jar:./lib/slf4j-api-1.7.2.jar:./lib/jackson-mapper-asl-1.0.1.jar:./lib/libthrift-0.9.1.jar:./lib/jackson-core-asl-1.9.2.jar:./lib/commons-lang3-3.1.jar:./lib/jamm-0.2.5.jar:./lib/super-csv-2.1.0.jar:./lib/metrics-core-2.2.0.jar:./lib/high-scale-lib-1.1.2.jar:./lib/concurrentlinkedhashmap-lru-1.3.jar:./lib/lz4-1.2.0.jar:./lib/jsr305-1.3.9.jar:./lib/log4j-1.2.16.jar:./lib/reporter-config-2.1.0.jar:./lib/netty-3.6.6.Final.jar:./lib/antlr-3.2.jar:./lib/jackson-core-asl-1.0.1.jar:./lib/snappy-java-1.0.5.jar:./lib/snakeyaml-1.11.jar:./lib/snaptree-0.1.jar:./lib/javax.validation-1.0.0.GA.jar:./lib/metrics-ganglia-2.0.3.jar:./lib/metrics-graphite-2.1.5.jar:./lib/thrift-server-internal-only-0.3.3.jar:./lib/disruptor-3.0.1.jar:./lib/compress-lzf-0.8.4.jar org.apache.cassandra.streaming.StreamReader >out_cassandra