#java -cp .:./code_classes/:soot-2.5.0.jar MyMain4 -app -cp .:$JAVA_HOME/jre/lib/rt.jar:./lib/jna-3.2.7.jar:./lib/guava-15.0.jar:./lib/slf4j-log4j12-1.7.2.jar:./lib/slf4j-api-1.7.2.jar:./lib/jackson-mapper-asl-1.0.1.jar:./lib/libthrift-0.9.1.jar:./lib/jackson-core-asl-1.9.2.jar:./lib/commons-lang3-3.1.jar:./lib/jamm-0.2.5.jar:./lib/super-csv-2.1.0.jar:./lib/metrics-core-2.2.0.jar:./lib/high-scale-lib-1.1.2.jar:./lib/concurrentlinkedhashmap-lru-1.3.jar:./lib/lz4-1.2.0.jar:./lib/jsr305-1.3.9.jar:./lib/log4j-1.2.16.jar:./lib/reporter-config-2.1.0.jar:./lib/netty-3.6.6.Final.jar:./lib/antlr-3.2.jar:./lib/jackson-core-asl-1.0.1.jar:./lib/snappy-java-1.0.5.jar:./lib/snakeyaml-1.11.jar:./lib/snaptree-0.1.jar:./lib/javax.validation-1.0.0.GA.jar:./lib/metrics-ganglia-2.0.3.jar:./lib/metrics-graphite-2.1.5.jar:./lib/thrift-server-internal-only-0.3.3.jar:./lib/disruptor-3.0.1.jar:./lib/compress-lzf-0.8.4.jar org.apache.cassandra.streaming.StreamReader >out_cassandra
rm -rf conf
#ln -s conf_cassandra_allIO_FPPattern_OR conf
#ln -s conf_cassandra_allIO_FPPattern_AND conf
#ln -s conf_cassandra_allIO_OR conf
ln -s conf_cassandra_allIO_AND conf

export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64
export JUNIT_HOME=/home/ting/DataLoopBugDetection/soot-soot-2.5.0
export CLASSPATH=$JUNIT_HOME/junit-4.12.jar:$JUNIT_HOME/hamcrest-core-1.3.jar:$JAVA_HOME/lib/tools.jar:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/jre/lib/jce.jar:/usr/share/scala/lib/scala-library.jar

export CASSANDRACLASSPATH=/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/snaptree-0.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/log4j-1.2.16.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/snappy-java-1.0.5.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/super-csv-2.1.0.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/metrics-core-2.2.0.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/javax.validation-1.0.0.GA.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/slf4j-log4j12-1.7.2.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/antlr-3.2.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/disruptor-3.0.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/high-scale-lib-1.1.2.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/snakeyaml-1.11.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/metrics-ganglia-2.0.3.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/compress-lzf-0.8.4.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/slf4j-api-1.7.2.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/libthrift-0.9.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/commons-lang3-3.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/jamm-0.2.5.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/guava-15.0.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/thrift-server-internal-only-0.3.3.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/netty-3.6.6.Final.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/lz4-1.2.0.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/jsr305-1.3.9.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/concurrentlinkedhashmap-lru-1.3.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/reporter-config-2.1.0.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/metrics-graphite-2.1.5.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/build/lib/jars/jna-3.2.7.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/build/lib/jars/jackson-core-asl-1.0.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/build/lib/jars/jackson-mapper-asl-1.0.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/build/apache-cassandra-thrift-2.0.8-SNAPSHOT.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/build/apache-cassandra-2.0.8-SNAPSHOT.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/commons-cli-1.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/json-simple-1.1.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/commons-codec-1.2.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/jbcrypt-0.3m.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/jline-1.0.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/jackson-mapper-asl-1.9.2.jar:/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/servlet-api-2.5-20081211.jar
export CODECLASSPATH=/home/ting/DataLoopBugDetection/workspace_java/MyBodyTransformer/bin
#java -cp .:./code_classes:soot-2.5.0.jar MyMain4 -cp .:$CASSANDRACLASSPATH:$CLASSPATH -app org.apache.cassandra.streaming.StreamReader > cassandra-2.0.8.txt
#cassandra is using soot-2.5.0.jar not soot-trunk.jar. If using soot-trunk.jar, there will be error
#/home/ting/DataLoopBugDetection/testsuite/apache-cassandra-2.0.8-src/lib/jackson-core-asl-1.9.2.jar #this causes some specific exception

#line=org.apache.cassandra.db.marshal.AbstractCompositeType
line=org.apache.cassandra.utils.obs.OffHeapBitSet
line=org.apache.cassandra.db.context.CounterContext

echo "parsing " ${line}
java -cp .:$CODECLASSPATH:soot-2.5.0.jar MyMain4 -cp .:$CASSANDRACLASSPATH:$CLASSPATH -app ${line} > cassandra-2.0.8.txt